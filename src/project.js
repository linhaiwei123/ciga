require=function t(o,e,n){function r(i,c){if(!e[i]){if(!o[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(a)return a(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=e[i]={exports:{}};o[i][0].call(u.exports,function(t){var e=o[i][1][t];return r(e?e:t)},u,u.exports,t,o,e,n)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({End:[function(t,o,e){"use strict";cc._RF.push(o,"1b4acxD9wFDOpoJEuF9nvVx","End"),Object.defineProperty(e,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=t("./Global2"),c=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onLoad=function(){i.resultState.good?(console.log("good"),this.testLabel.string="good"):i.resultState.bad?this.testLabel.string="bad":i.resultState.middle&&(this.testLabel.string="middle")},o}(cc.Component);__decorate([a(cc.Label)],c.prototype,"testLabel",void 0),c=__decorate([r],c),e["default"]=c,cc._RF.pop()},{"./Global2":"Global2"}],Global2:[function(t,o,e){"use strict";cc._RF.push(o,"b43ceqg2z9KiY9Esg58OWR2","Global2"),Object.defineProperty(e,"__esModule",{value:!0}),e.storyConfigDataArray2=[{id:0,yesToHp:1,noToHp:0,isUsed:0,dialogId:0},{id:1,yesToHp:1,noToHp:0,isUsed:0,dialogId:1},{id:2,yesToHp:1,noToHp:0,isUsed:0,dialogId:2},{id:3,yesToHp:0,noToHp:1,isUsed:0,dialogId:3},{id:4,yesToHp:0,noToHp:1,isUsed:0,dialogId:4},{id:5,yesToHp:0,noToHp:1,isUsed:0,dialogId:4}],e.dialogConfigDataArray2=[["up:否","down:否","up:否","down:否","up:否"],["down:否","up:否","down:否","up:否","down:否","up:否"],["up:否","down:否","up:否","down:否","up:否","down:否","up:否"],["down:是","up:是","down:是","up:是","down:是","up:是","down:是","up:是"],["up:是","down:是","up:是","down:是","up:是","down:是","up:是","down:是","up:是"],["down:是","up:是","down:是","up:是","down:是","up:是","down:是","up:是","down:是","up:是"]],e.hpConfigData2={currentHp:0,goodWinHp:3,badWinHp:-3},e.storyNumConfigData2={currentStoryNum:0,totalStoryNum:5},e.resultState={good:!1,bad:!1,middle:!1,none:!1},cc._RF.pop()},{}],Global:[function(t,o,e){"use strict";cc._RF.push(o,"7474fezFudIyK8LtGBWCiI+","Global"),Object.defineProperty(e,"__esModule",{value:!0}),e.timeConfigData={ZhiYa:3,YouYa:3,LvYe:5,KuYe:3,KuMaoYe:3},e.storyArrayConfigData=[{id:0,storyName:"hello name 0",title:"hello title 0",content:"hello content 0",yesToHp:3,noToHp:-3,isUsed:0},{id:1,storyName:"hello name 1",title:"hello title 1",content:"hello content 1",yesToHp:3,noToHp:-3,isUsed:0},{id:2,storyName:"hello name 2",title:"hello title 2",content:"hello content 2",yesToHp:3,noToHp:-3,isUsed:0},{id:3,storyName:"hello name 3",title:"hello title 3",content:"hello content 3",yesToHp:3,noToHp:-3,isUsed:0},{id:4,storyName:"hello name 4",title:"hello title 4",content:"hello content 4",yesToHp:3,noToHp:-3,isUsed:0},{id:5,storyName:"hello name 5",title:"hello title 5",content:"hello content 5",yesToHp:3,noToHp:-3,isUsed:0},{id:6,storyName:"hello name 6",title:"hello title 6",content:"hello content 6",yesToHp:3,noToHp:-3,isUsed:0},{id:7,storyName:"hello name 7",title:"hello title 7",content:"hello content 7",yesToHp:3,noToHp:-3,isUsed:0},{id:8,storyName:"hello name 8",title:"hello title 8",content:"hello content 8",yesToHp:3,noToHp:-3,isUsed:0},{id:9,storyName:"hello name 9",title:"hello title 9",content:"hello content 9",yesToHp:3,noToHp:-3,isUsed:0},{id:10,storyName:"hello name 10",title:"hello title 10",content:"hello content 10",yesToHp:3,noToHp:-3,isUsed:0},{id:11,storyName:"hello name 11",title:"hello title 11",content:"hello content 11",yesToHp:3,noToHp:-3,isUsed:0},{id:12,storyName:"hello name 12",title:"hello title 12",content:"hello content 12",yesToHp:3,noToHp:-3,isUsed:0},{id:13,storyName:"hello name 13",title:"hello title 13",content:"hello content 13",yesToHp:3,noToHp:-3,isUsed:0},{id:14,storyName:"hello name 14",title:"hello title 14",content:"hello content 14",yesToHp:3,noToHp:-3,isUsed:0},{id:15,storyName:"hello name 15",title:"hello title 15",content:"hello content 15",yesToHp:3,noToHp:-3,isUsed:0},{id:16,storyName:"hello name 16",title:"hello title 16",content:"hello content 16",yesToHp:3,noToHp:-3,isUsed:0},{id:17,storyName:"hello name 17",title:"hello title 17",content:"hello content 17",yesToHp:3,noToHp:-3,isUsed:0},{id:18,storyName:"hello name 18",title:"hello title 18",content:"hello content 18",yesToHp:3,noToHp:-3,isUsed:0},{id:19,storyName:"hello name 19",title:"hello title 19",content:"hello content 19",yesToHp:3,noToHp:-3,isUsed:0},{id:20,storyName:"hello name 20",title:"hello title 20",content:"hello content 20",yesToHp:3,noToHp:-3,isUsed:0}],e.leafToNodeConfigData=[0,0,0,0,0,0,0,0,0,0],e.hpToMaoYeConfigData=[0,3,6,9,12,15,18,21,24,27,30],e.hpConfigData={hpToGood:0,hpToBad:0,hpToGoodWin:100,hpToBadWin:100},e.handlerStateArray=["ZhiYa","YouYa","LvYe","KuYe","KuMaoYe"],e.testColor={ZhiYa:cc.Color.WHITE,YouYa:cc.Color.YELLOW,LvYe:cc.Color.GREEN},cc._RF.pop()},{}],LeafController:[function(t,o,e){"use strict";cc._RF.push(o,"aac1dT0nadA0rmiZ7B4tBI5","LeafController"),Object.defineProperty(e,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=n.property,i=t("./Global"),c=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onLoad=function(){},o.prototype.start=function(){this.generateZhiYa()},o.prototype.generateZhiYa=function(){for(var t=Math.ceil(10*cc.random0To1());0!==i.leafToNodeConfigData[t];)t=t++%10},o.prototype.updateHp=function(t,o){o?i.hpConfigData.hpToGood+=t:i.hpConfigData.hpToBad+=t},o.prototype.isGameEnd=function(){return i.hpConfigData.hpToGood>i.hpConfigData.hpToGoodWin||i.hpConfigData.hpToBad>i.hpConfigData.hpToBadWin},o}(cc.Component);__decorate([a(cc.Node)],c.prototype,"leaf1A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf2A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf3A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf4A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf5A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf6A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf7A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf8A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf9A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf10A",void 0),__decorate([a(cc.Node)],c.prototype,"leaf1B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf2B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf3B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf4B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf5B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf6B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf7B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf8B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf9B",void 0),__decorate([a(cc.Node)],c.prototype,"leaf10B",void 0),c=__decorate([r],c),e["default"]=c,cc._RF.pop()},{"./Global":"Global"}],LeafItemController:[function(t,o,e){"use strict";cc._RF.push(o,"26841zS8xdPI7UhQ2c3/pBP","LeafItemController"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./LeafItemFsm"),r=cc._decorator,a=r.ccclass,i=r.property,c=t("./Global"),s=t("./QuestionPanel"),l=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.handler=null,o.handlerFunc=null,o.startTimeStamp=null,o.freezeDeltaTime=null,o}return __extends(o,t),o.prototype.onLoad=function(){this.node.on("touchend",this.onTouchEnd,this),cc.find("Canvas").on("pauseAllLeafItem",this.onPauseAllLeafItem,this),cc.find("Canvas").on("resumeAllLeafItem",this.onResumeAllLeafItem,this)},o.prototype.onTouchEnd=function(){this.fsmCurrent()===this.stateName.LvYe&&(this.showQuestionPanel(),this.pauseAllLeafItem())},o.prototype.pauseAllLeafItem=function(){cc.find("Canvas").emit("pauseAllLeafItem")},o.prototype.onPauseAllLeafItem=function(){if(this.fsmCurrent()!==this.stateName.LvYe){var t=c.timeConfigData[this.fsmCurrent()],o=+new Date;this.freezeDeltaTime=t-(o-this.startTimeStamp)/1e3,clearTimeout(this.handler)}},o.prototype.onResumeAllLeafItem=function(){this.fsmCurrent()!==this.stateName.LvYe&&(this.handler=setTimeout(this.handlerFunc,this.freezeDeltaTime))},o.prototype.showQuestionPanel=function(){this.touchMask.position=cc.v2(0,0),this.questionPanel.getComponent(s["default"]).initQuestion(this),this.questionPanel.position=cc.v2(0,0)},o.prototype.onEnterYouYa=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.startTimeStamp=+new Date,this.handler=setTimeout(this.onTimeoutFromYouYaToLvYe,c.timeConfigData.YouYa),this.handlerFunc=this.onTimeoutFromYouYaToLvYe},o.prototype.onEnterLvYe=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r]},o.prototype.onEnterKuYe=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r]},o.prototype.onEnterZhiYa=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];this.startTimeStamp=+new Date,this.handler=setTimeout(this.onTimeoutFromZhiYaToYouYa,c.timeConfigData.ZhiYa),this.handlerFunc=this.onTimeoutFromZhiYaToYouYa},o.prototype.onTimeoutFromZhiYaToYouYa=function(){this.ToYouYa()},o.prototype.onTimeoutFromYouYaToLvYe=function(){this.ToLvYe()},o}(n.LeafItemFsm);__decorate([i(cc.Node)],l.prototype,"questionPanel",void 0),__decorate([i(cc.Node)],l.prototype,"touchMask",void 0),l=__decorate([a],l),e["default"]=l,cc._RF.pop()},{"./Global":"Global","./LeafItemFsm":"LeafItemFsm","./QuestionPanel":"QuestionPanel"}],LeafItemFsm:[function(t,o,e){"use strict";cc._RF.push(o,"d9ab0jdZ/dODZzQctloCM1+","LeafItemFsm"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("../libs/StateMachine"),r=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.stateName={YouYa:"YouYa",LvYe:"LvYe",MaoYe:"MaoYe",KuYe:"KuYe",KuMaoYe:"KuMaoYe",ZhiYa:"ZhiYa"},o.eventName={ToLvYe:"ToLvYe",ToMaoYe:"ToMaoYe",ToKuYe:"ToKuYe",ToKuMaoYe:"ToKuMaoYe",ToYouYa:"ToYouYa",ToZhiYaFromKuMaoYe:"ToZhiYaFromKuMaoYe",ToZhiyaFromKuYe:"ToZhiyaFromKuYe"},o}return __extends(o,t),o.prototype.fsmTrigger=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];(n=this.fsm)[t].apply(n,o);var n},o.prototype.fsmIs=function(t){return this.fsm.is(t)},o.prototype.fsmCan=function(t){return this.fsm.can(t)},o.prototype.fsmCannot=function(t){return this.fsm.cannot(t)},o.prototype.fsmCurrent=function(){return this.fsm.current},o.prototype.fsmStartUp=function(){this.fsm=n["default"].create({initial:"ZhiYa",events:[{name:"ToLvYe",from:"YouYa",to:"LvYe"},{name:"ToMaoYe",from:"LvYe",to:"MaoYe"},{name:"ToKuYe",from:"LvYe",to:"KuYe"},{name:"ToKuMaoYe",from:"MaoYe",to:"KuMaoYe"},{name:"ToYouYa",from:"ZhiYa",to:"YouYa"},{name:"ToZhiYaFromKuMaoYe",from:"KuMaoYe",to:"ZhiYa"},{name:"ToZhiyaFromKuYe",from:"KuYe",to:"ZhiYa"}],callbacks:{onenterYouYa:[this.onEnterYouYa],onenterLvYe:[this.onEnterLvYe],onenterKuYe:[this.onEnterKuYe],onenterZhiYa:[this.onEnterZhiYa]}},this)},o.prototype.ToLvYe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToLvYe.apply(e,t);var e},o.prototype.ToMaoYe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToMaoYe.apply(e,t);var e},o.prototype.ToKuYe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToKuYe.apply(e,t);var e},o.prototype.ToKuMaoYe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToKuMaoYe.apply(e,t);var e},o.prototype.ToYouYa=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToYouYa.apply(e,t);var e},o.prototype.ToZhiYaFromKuMaoYe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToZhiYaFromKuMaoYe.apply(e,t);var e},o.prototype.ToZhiyaFromKuYe=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).ToZhiyaFromKuYe.apply(e,t);var e},o}(cc.Component);e.LeafItemFsm=r,cc._RF.pop()},{"../libs/StateMachine":"StateMachine"}],LoadingTest:[function(t,o,e){"use strict";cc._RF.push(o,"4b4594yv7FCBqIuj2fZoJzi","LoadingTest"),Object.defineProperty(e,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,a=(n.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onLoad=function(){this.node.on("touchstart",function(){console.log("touch start"),cc.loader.loadRes("testLoadingScene",function(t,o){console.log(t/o*100+" %")},function(t){return t?console.error("load error: "+t):(console.log("done"),void cc.director.loadScene("testLoadingScene"))})})},o}(cc.Component));a=__decorate([r],a),e["default"]=a,cc._RF.pop()},{}],MainController:[function(t,o,e){"use strict";cc._RF.push(o,"b2ba9AW7B5D/Ki0S+wJmkMt","MainController"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./TouchLayer"),r=cc._decorator,a=r.ccclass,i=r.property,c=t("./Global2"),s=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onLoad=function(){this.hideAll(),this.newTurn()},o.prototype.newTurn=function(){var t=null;if(c.storyNumConfigData2.currentStoryNum!==c.storyNumConfigData2.totalStoryNum)for(t=Math.floor(cc.random0To1()*c.storyNumConfigData2.totalStoryNum);1===c.storyConfigDataArray2[t].isUsed;)t=t++%c.storyNumConfigData2.totalStoryNum;c.storyNumConfigData2.currentStoryNum++,this.touchLayer.node.active=!0,this.touchLayer.show(c.storyConfigDataArray2[t])},o.prototype.onAnswerEnd=function(t){this.hideAll(),0===t?c.hpConfigData2.currentHp++:c.hpConfigData2.currentHp--;var o=this.checkEnd();c.storyNumConfigData2.currentStoryNum++,o||this.newTurn()},o.prototype.checkEnd=function(){return c.hpConfigData2.currentHp>=c.hpConfigData2.goodWinHp?(this.resetResultState(),c.resultState.good=!0,cc.director.loadScene("end"),!0):c.hpConfigData2.currentHp<=c.hpConfigData2.badWinHp?(this.resetResultState(),c.resultState.bad=!0,cc.director.loadScene("end"),!0):c.storyNumConfigData2.currentStoryNum===c.storyNumConfigData2.totalStoryNum&&(this.resetResultState(),c.resultState.middle=!0,cc.director.loadScene("end"),!0)},o.prototype.resetResultState=function(){c.resultState.good=!1,c.resultState.bad=!1,c.resultState.middle=!1,c.resultState.none=!1},o.prototype.hideAll=function(){this.yesBtn.active=!1,this.noBtn.active=!1,this.touchLayer.node.active=!1,this.goodDialog.active=!1,this.badDialog.active=!1},o}(cc.Component);__decorate([i(cc.Node)],s.prototype,"yesBtn",void 0),__decorate([i(cc.Node)],s.prototype,"noBtn",void 0),__decorate([i(cc.Node)],s.prototype,"goodDialog",void 0),__decorate([i(cc.Node)],s.prototype,"badDialog",void 0),__decorate([i(n["default"])],s.prototype,"touchLayer",void 0),__decorate([i(cc.Node)],s.prototype,"upNode1",void 0),__decorate([i(cc.Node)],s.prototype,"upNode2",void 0),__decorate([i(cc.Node)],s.prototype,"upNode3",void 0),__decorate([i(cc.Node)],s.prototype,"upNode4",void 0),__decorate([i(cc.Node)],s.prototype,"upNode5",void 0),__decorate([i(cc.Node)],s.prototype,"upNode6",void 0),__decorate([i(cc.Node)],s.prototype,"upNode7",void 0),__decorate([i(cc.Node)],s.prototype,"upNode8",void 0),__decorate([i(cc.Node)],s.prototype,"upNode9",void 0),__decorate([i(cc.Node)],s.prototype,"upNode10",void 0),__decorate([i(cc.Node)],s.prototype,"downNode1",void 0),__decorate([i(cc.Node)],s.prototype,"downNode2",void 0),__decorate([i(cc.Node)],s.prototype,"downNode3",void 0),__decorate([i(cc.Node)],s.prototype,"downNode4",void 0),__decorate([i(cc.Node)],s.prototype,"downNode5",void 0),__decorate([i(cc.Node)],s.prototype,"downNode6",void 0),__decorate([i(cc.Node)],s.prototype,"downNode7",void 0),__decorate([i(cc.Node)],s.prototype,"downNode8",void 0),__decorate([i(cc.Node)],s.prototype,"downNode9",void 0),__decorate([i(cc.Node)],s.prototype,"downNode10",void 0),s=__decorate([a],s),e["default"]=s,cc._RF.pop()},{"./Global2":"Global2","./TouchLayer":"TouchLayer"}],QuestionPanel:[function(t,o,e){"use strict";cc._RF.push(o,"ad65fnLntVIQ5YU5CAopfex","QuestionPanel"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./LeafController"),r=cc._decorator,a=r.ccclass,i=r.property,c=t("./Global"),s=function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.onLoad=function(){this.yesBtn.on("touchend",this.onYesBtnTouchEnd,this),this.noBtn.on("touchend",this.onNoBtnTouchend,this)},o.prototype.initQuestion=function(t){this.leafItemController=t;for(var o=Math.ceil(10*cc.random0To1());0!==c.storyArrayConfigData[o].isUsed;)o=o++%10;c.storyArrayConfigData[o].isUsed=1,this.currentStory=c.storyArrayConfigData[o],this.initStoryView(c.storyArrayConfigData[o])},o.prototype.initStoryView=function(t){this.id.getComponent(cc.Label).string=""+t.id,this.storyName.getComponent(cc.Label).string=""+t.storyName,this.title.getComponent(cc.Label).string=""+t.title,this.content.getComponent(cc.Label).string=""+t.content},o.prototype.onYesBtnTouchEnd=function(){this.leafController.updateHp(this.currentStory.yesToHp,!0),this.leafController.isGameEnd()||this.onAfterBtnTouchend()},o.prototype.onNoBtnTouchend=function(){this.leafController.updateHp(this.currentStory.noToHp,!1),this.leafController.isGameEnd()||this.onAfterBtnTouchend()},o.prototype.onAfterBtnTouchend=function(){this.touchMask.position=cc.v2(1e4,1e4),this.node.position=cc.v2(1e4,1e4),cc.find("Canvas").emit("resumeAllLeafItem")},o}(cc.Component);__decorate([i(cc.Node)],s.prototype,"yesBtn",void 0),__decorate([i(cc.Node)],s.prototype,"noBtn",void 0),__decorate([i(cc.Node)],s.prototype,"id",void 0),__decorate([i(cc.Node)],s.prototype,"storyName",void 0),__decorate([i(cc.Node)],s.prototype,"title",void 0),__decorate([i(cc.Node)],s.prototype,"content",void 0),__decorate([i(cc.Node)],s.prototype,"touchMask",void 0),__decorate([i(n["default"])],s.prototype,"leafController",void 0),s=__decorate([a],s),e["default"]=s,cc._RF.pop()},{"./Global":"Global","./LeafController":"LeafController"}],StateMachine:[function(t,o,e){"use strict";cc._RF.push(o,"ff414ax8ghCtZ6Tb9CpHH2T","StateMachine"),Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.create=function(o,e){var n="string"==typeof o.initial?{state:o.initial}:o.initial,r=o.terminal||o["final"],a=e,i=o.events||[],c=o.callbacks||{},s={},l={},u=function(o){var e=Array.isArray(o.from)?o.from:o.from?[o.from]:[t.WILDCARD];s[o.name]=s[o.name]||{};for(var n=0;n<e.length;n++)l[e[n]]=l[e[n]]||[],l[e[n]].push(o.name),s[o.name][e[n]]=o.to||e[n];o.to&&(l[o.to]=l[o.to]||[])};n&&(n.event=n.event||"startup",u({name:n.event,from:"none",to:n.state}));for(var d=0;d<i.length;d++)u(i[d]);for(var p in s)s.hasOwnProperty(p)&&(a[p]=t.buildEvent(p,s[p]));for(var p in c)c.hasOwnProperty(p)&&(a[p]=c[p]);return a.current="none",a.is=function(t){return Array.isArray(t)?t.indexOf(this.current)>=0:this.current===t},a.can=function(o){return!this.transition&&void 0!==s[o]&&(s[o].hasOwnProperty(this.current)||s[o].hasOwnProperty(t.WILDCARD))},a.cannot=function(t){return!this.can(t)},a.transitions=function(){return(l[this.current]||[]).concat(l[t.WILDCARD]||[])},a.isFinished=function(){return this.is(r)},a.error=o.error||function(t,o,e,n,r,a,i){throw i||a},a.states=function(){return Object.keys(l).sort()},n&&!n.defer&&a[n.event](),a},t.doCallback=function(o,e,n,r,a,i){if(e)try{if(Array.isArray(e)){for(var c=0,s=e.length;c<s;c++)e[c].apply(o,[n,r,a].concat(i));return!0}for(var c=0,s=e[r].length;c<s;c++)e[r][c].apply(o,[n,r,a].concat(i));return!0}catch(l){return o.error(n,r,a,i,t.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",l),!0}return!0},t.beforeAnyEvent=function(o,e,n,r,a){return t.doCallback(o,o.onbeforeevent,e,n,r,a)},t.afterAnyEvent=function(o,e,n,r,a){return t.doCallback(o,o.onafterevent||o.onevent,e,n,r,a)},t.leaveAnyState=function(o,e,n,r,a){return t.doCallback(o,o.onleavestate,e,n,r,a)},t.enterAnyState=function(o,e,n,r,a){return t.doCallback(o,o.onenterstate||o.onstate,e,n,r,a)},t.changeState=function(o,e,n,r,a){return t.doCallback(o,o.onchangestate,e,n,r,a)},t.beforeThisEvent=function(o,e,n,r,a){return t.doCallback(o,o["onbefore"+e],e,n,r,a)},t.afterThisEvent=function(o,e,n,r,a){return t.doCallback(o,o["onafter"+e]||o["on"+e],e,n,r,a)},t.leaveThisState=function(o,e,n,r,a){return t.doCallback(o,o["onleave"+n],e,n,r,a)},t.enterThisState=function(o,e,n,r,a){return t.doCallback(o,o["onenter"+r]||o["on"+r],e,n,r,a)},t.beforeEvent=function(o,e,n,r,a){return!1!==t.beforeThisEvent(o,e,n,r,a)&&!1!==t.beforeAnyEvent(o,e,n,r,a)},t.afterEvent=function(o,e,n,r,a){t.afterThisEvent(o,e,n,r,a),t.afterAnyEvent(o,e,n,r,a)},t.leaveState=function(o,e,n,r,a){var i=t.leaveThisState(o,e,n,r,a),c=t.leaveAnyState(o,e,n,r,a);return!1!==i&&!1!==c&&(typeof t.ASYNC!=typeof i&&typeof t.ASYNC!=typeof c||t.ASYNC)},t.enterState=function(o,e,n,r,a){t.enterThisState(o,e,n,r,a),t.enterAnyState(o,e,n,r,a)},t.buildEvent=function(o,e){return function(){var n=this.current,r=e[n]||(e[t.WILDCARD]!=t.WILDCARD?e[t.WILDCARD]:n)||n,a=Array.prototype.slice.call(arguments);if(this.transition)return this.error(o,n,r,a,t.Error.PENDING_TRANSITION,"event "+o+" inappropriate because previous transition did not complete");if(this.cannot(o))return this.error(o,n,r,a,t.Error.INVALID_TRANSITION,"event "+o+" inappropriate in current state "+this.current);if(!1===t.beforeEvent(this,o,n,r,a))return t.Result.CANCELLED;if(n===r)return t.afterEvent(this,o,n,r,a),t.Result.NOTRANSITION;var i=this;this.transition=function(){return i.transition=null,i.current=r,t.enterState(i,o,n,r,a),t.changeState(i,o,n,r,a),t.afterEvent(i,o,n,r,a),t.Result.SUCCEEDED},this.transition.cancel=function(){i.transition=null,t.afterEvent(i,o,n,r,a)};var c=t.leaveState(this,o,n,r,a);return!1===c?(this.transition=null,t.Result.CANCELLED):t.ASYNC===c?t.Result.PENDING:this.transition?this.transition():void 0}},t}();n.VERSION="2.4.0",n.Result={SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},n.Error={INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},n.WILDCARD="*",n.ASYNC="async",e["default"]=n,cc._RF.pop()},{}],TestFsmSubClass:[function(t,o,e){"use strict";cc._RF.push(o,"3b2c9IrWalEsaS5tMmZoTIm","TestFsmSubClass"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./TestFsm"),r=cc._decorator,a=r.ccclass,i=(r.property,function(t){function o(){return null!==t&&t.apply(this,arguments)||this}return __extends(o,t),o.prototype.enterA=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];console.log("enterA")},o.prototype.enterB=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];console.log("enterB")},o.prototype.enterC=function(t,o,e){for(var n=[],r=3;r<arguments.length;r++)n[r-3]=arguments[r];console.log("enterC")},o.prototype.onLoad=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(o){switch(o.label){case 0:this.fsmStartUp(),t=0,o.label=1;case 1:return t<5?[4,this.waitGo()]:[3,4];case 2:o.sent(),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},o.prototype.waitGo=function(){return __awaiter(this,void 0,void 0,function(){var t=this;return __generator(this,function(o){return[2,new Promise(function(o,e){setTimeout(function(){t.go(),o()},2e3)})]})})},o}(n.TestFsm));i=__decorate([a],i),e["default"]=i,cc._RF.pop()},{"./TestFsm":"TestFsm"}],TestFsm:[function(t,o,e){"use strict";cc._RF.push(o,"8e269R5SzhD+ott9nNC7w9S","TestFsm"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("../libs/StateMachine"),r=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.stateName={A:"A",B:"B",C:"C"},o.eventName={go:"go"},o}return __extends(o,t),o.prototype.fsmTrigger=function(t){for(var o=[],e=1;e<arguments.length;e++)o[e-1]=arguments[e];(n=this.fsm)[t].apply(n,o);var n},o.prototype.fsmIs=function(t){return this.fsm.is(t)},o.prototype.fsmCan=function(t){return this.fsm.can(t)},o.prototype.fsmCannot=function(t){return this.fsm.cannot(t)},o.prototype.fsmCurrent=function(){return this.fsm.current},o.prototype.fsmStartUp=function(){this.fsm=n["default"].create({initial:"A",events:[{name:"go",from:"A",to:"B"},{name:"go",from:"B",to:"C"},{name:"go",from:"C",to:"A"}],callbacks:{onenterA:[this.enterA],onenterB:[this.enterB],onenterC:[this.enterC]}},this)},o.prototype.go=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(e=this.fsm).go.apply(e,t);var e},o}(cc.Component);e.TestFsm=r,cc._RF.pop()},{"../libs/StateMachine":"StateMachine"}],TouchLayer:[function(t,o,e){"use strict";cc._RF.push(o,"7ae67PpOD9Ll4iuuMP9OV3W","TouchLayer"),Object.defineProperty(e,"__esModule",{value:!0});var n=t("./MainController"),r=cc._decorator,a=r.ccclass,i=r.property,c=t("./Global2"),s=function(t){function o(){var o=null!==t&&t.apply(this,arguments)||this;return o.currentDialogNum=0,o.isContentShowed=!1,o}return __extends(o,t),o.prototype.onLoad=function(){this.mainController=this.mainControllerNode.getComponent(n["default"]),this.node.on("touchend",this.onTouchEnd,this),this.yesBtn.on("touchend",this.onYesBtnTouchEnd,this),this.noBtn.on("touchend",this.onNoBtnTouchEnd,this)},o.prototype.onYesBtnTouchEnd=function(){this.mainController.onAnswerEnd(this.storyData.yesToHp)},o.prototype.onNoBtnTouchEnd=function(){this.mainController.onAnswerEnd(this.storyData.noToHp)},o.prototype.show=function(t){this.node.active=!0,this.isContentShowed=!1,this.currentDialogNum=0,this.storyData=t,this.dialogData=c.dialogConfigDataArray2[this.storyData.dialogId],this.node.position=cc.v2(0,0),this.onTouchEnd()},o.prototype.hideWithRunning=function(){this.node.position=cc.v2(1e4,1e4)},o.prototype.onTouchEnd=function(){this.currentDialogNum==this.dialogData.length-1?this.isContentShowed||(this.isContentShowed=!0,this.showContent(),this.showBtn(),this.hideWithRunning()):(this.showContent(),this.currentDialogNum++)},o.prototype.showContent=function(){var t=this.getDialogContent(this.currentDialogNum);this.isStartFromUp(this.currentDialogNum)?(this.goodDialog.getChildByName("goodLabel").getComponent(cc.Label).string=t,this.goodDialog.active=!0,this.badDialog.active=!1):(this.badDialog.getChildByName("badLabel").getComponent(cc.Label).string=t,this.badDialog.active=!0,this.goodDialog.active=!1)},o.prototype.showBtn=function(){this.yesBtn.active=!0,this.noBtn.active=!0},o.prototype.isStartFromUp=function(t){var o=this.dialogData[t],e=o.split(":")[0];return"up"===e},o.prototype.getDialogContent=function(t){var o=this.dialogData[t],e=o.split(":")[1];return e},o}(cc.Component);__decorate([i(cc.Node)],s.prototype,"mainControllerNode",void 0),__decorate([i(cc.Node)],s.prototype,"yesBtn",void 0),__decorate([i(cc.Node)],s.prototype,"noBtn",void 0),__decorate([i(cc.Node)],s.prototype,"goodDialog",void 0),__decorate([i(cc.Node)],s.prototype,"badDialog",void 0),s=__decorate([a],s),e["default"]=s,cc._RF.pop()},{"./Global2":"Global2","./MainController":"MainController"}]},{},["StateMachine","End","Global","Global2","LeafController","LeafItemController","LeafItemFsm","MainController","QuestionPanel","TouchLayer","LoadingTest","TestFsm","TestFsmSubClass"]);